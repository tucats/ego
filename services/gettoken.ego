/*
 * Get a new token. Requires a payload with the username and password
 */
import strings
import util 

@authentication_domain "authentication"

user := ""
password := ""

try {
   payload := _json.decode(_body)
   user = payload.user
   password = payload.password
} catch {
    print "Error: invalid payload"
}

if user != "" {
    print _cipher.token(user)
}

