// Simple heartbeat service
 
import "http"

func handler( req http.Request, resp http.Response) {
    resp.WriteStatus(200)
    host := os.Hostname()

    @text {
        msg := fmt.Sprintf("UP (pid %d, hostname %s, session %s) since %s", _pid, host, _session, _start_time)
        resp.Write(msg)
    }

    @json {
        msg := {pid:_pid, host:host, session:_session, since: _start_time}
        resp.Write(msg)
    }
}